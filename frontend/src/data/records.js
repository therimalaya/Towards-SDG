import Goals from '../data/goals.json';
import Targets from '../data/targets.json';

const Records = [
  {
    "Coauthors": {
      "Faculty": [
        "HH"
      ]
    },
    "Faculty": "HH",
    "Name": "Arild Wæraas",
    "Research": {
      "Outreach": "Yes",
      "Title": "Organizational Identity and Corporate Social Responsibility (CSR) Legitimation",
      "Type": "Theoretical/ Conceptual work",
      "URL": "https://link.springer.com/referencework/10.1007%2F978-3-319-68845-9"
    },
    "SDGRecords": [],
    "created": {
      "seconds": 1581436171,
      "nanoseconds": 221000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "Other"
      ]
    },
    "Faculty": "HH",
    "Name": "Arild Angelsen",
    "Research": {
      "Outreach": "Yes",
      "Title": "Results-based payment: Who should be paid, and for what?",
      "Type": "Reviews/ Synthesis",
      "URL": "https://www.cifor.org/library/7045/"
    },
    "SDGRecords": [
      {
        "Goals": [
          13,
          15
        ],
        "Interaction": {
          "direction": "",
          "type": "Indirect",
          "value": "Positive"
        },
        "Targets": [
          "13.2",
          "15.2"
        ]
      }
    ],
    "created": {
      "seconds": 1579617499,
      "nanoseconds": 209000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "HH"
      ]
    },
    "Faculty": "HH",
    "Name": "Hambulo Ngomaa",
    "Research": {
      "Outreach": "Yes",
      "Title": "Pay, talk or ‘whip’ to conserve forests: Framed field experiments in Zambia",
      "Type": "Experiments",
      "URL": "https://www.sciencedirect.com/science/article/abs/pii/S0305750X19304954?CMX_ID=&SIS_ID=0&dgcid=STMJ_75273_AUTH_SERV_PPUB&utm_acid=13640654&utm_campaign=STMJ_75273_AUTH_SERV_PPUB&utm_dgroup=Email1Publishing&utm_in=DM636629&utm_medium=email&utm_source=AC_30&utm_term=Email%201%20Publishing_TLSH"
    },
    "SDGRecords": [
      {
        "Goals": [
          13,
          15
        ],
        "Interaction": {
          "direction": "",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "13.2",
          "15.1"
        ]
      }
    ],
    "created": {
      "seconds": 1579616794,
      "nanoseconds": 174000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        ""
      ]
    },
    "Faculty": "HH",
    "Name": "Gro Ladegård",
    "Research": {
      "Outreach": "Yes",
      "Title": "Women on corporate boards",
      "Type": "Case studies (Qualitative analysis)",
      "URL": "www.groladegard.no"
    },
    "SDGRecords": [],
    "created": {
      "seconds": 1579074377,
      "nanoseconds": 905000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "KBM",
        "Other"
      ]
    },
    "Faculty": "KBM",
    "Name": "Solve Sæbø",
    "Research": {
      "Outreach": "Yes",
      "Title": "Does academia disfavor contextual and extraverted students",
      "Type": "Statistical analysis of primary observational data",
      "URL": "https://www.idunn.no/uniped/2015/04/does_academia_disfavor_contextual_and_extraverted_students"
    },
    "SDGRecords": [
      {
        "Goals": [
          4,
          10
        ],
        "Interaction": {
          "direction": "ltr",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "4.3",
          "10.3"
        ]
      },
      {
        "Goals": [
          4,
          4
        ],
        "Interaction": {
          "direction": "",
          "type": "Indirect",
          "value": "Positive"
        },
        "Targets": [
          "4.3",
          "4.4"
        ]
      },
      {
        "Goals": [
          4,
          5
        ],
        "Interaction": {
          "direction": "ltr",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "4.3",
          "5.5"
        ]
      },
      {
        "Goals": [
          4,
          8
        ],
        "Interaction": {
          "direction": "ltr",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "4.3",
          "8.6"
        ]
      }
    ],
    "created": {
      "seconds": 1578381138,
      "nanoseconds": 76000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "Other"
      ]
    },
    "Faculty": "Other",
    "Name": "Sjur Baardsen",
    "Research": {
      "Outreach": "No",
      "Title": "Rector",
      "Type": "Statistical analysis of secondary data",
      "URL": "https://www.nmbu.no/ans/sjur.baardsen"
    },
    "SDGRecords": [
      {
        "Goals": [
          1,
          1
        ],
        "Interaction": {
          "direction": "",
          "type": "",
          "value": ""
        },
        "Targets": [
          "1.1",
          "1.4"
        ]
      },
      {
        "Goals": [
          1,
          6
        ],
        "Interaction": {
          "direction": "rtl",
          "type": "Indirect",
          "value": "Negative"
        },
        "Targets": [
          "1.1",
          "6.1"
        ]
      }
    ],
    "created": {
      "seconds": 1578039190,
      "nanoseconds": 678000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "KBM",
        "Other"
      ]
    },
    "Faculty": "KBM",
    "Name": "Solve Sæbø",
    "Research": {
      "Outreach": "Yes",
      "Title": "Does this work",
      "Type": "Statistical analysis of primary observational data",
      "URL": "www.nmbu.no"
    },
    "SDGRecords": [
      {
        "Goals": [
          2,
          13
        ],
        "Interaction": {
          "direction": "rtl",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "2.4",
          "13.2"
        ]
      }
    ],
    "created": {
      "seconds": 1577971798,
      "nanoseconds": 466000000
    }
  },
  {
    "Coauthors": {
      "Faculty": [
        "KBM",
        "Other"
      ]
    },
    "Faculty": "KBM",
    "Name": "Solve Sæbø",
    "Research": {
      "Outreach": "Yes",
      "Title": "Does academia disfavor contextual and extraverted students?",
      "Type": "Statistical analysis of primary observational data",
      "URL": "https://www.idunn.no/uniped/2015/04/does_academia_disfavor_contextual_and_extraverted_students"
    },
    "SDGRecords": [
      {
        "Goals": [
          4,
          4
        ],
        "Interaction": {
          "direction": "",
          "type": "",
          "value": ""
        },
        "Targets": [
          "4.4",
          "4.6"
        ]
      },
      {
        "Goals": [
          4,
          10
        ],
        "Interaction": {
          "direction": "ltr",
          "type": "Direct",
          "value": "Positive"
        },
        "Targets": [
          "4.1",
          "10.3"
        ]
      }
    ],
    "created": {
      "seconds": 1577969504,
      "nanoseconds": 737000000
    }
  }
]

const parseNodes = (goals, targets) => {
  return (
    targets
      .filter(item => item.id.match("[0-9]$"))
      .map(item => ({
        id: item.id,
        label: item.id,
        title: item.title,
        group: item.goal,
        color: goals[item.goal - 1].colorInfo.hex
      }))
  )
}

const parseEdges = record => (
  record.SDGRecords
    .filter(item => item.Targets.length > 1)
    .map(item => ({
      from: item.Targets[0],
      to: item.Targets[1],
      direction: item.Interaction.direction,
      type: item.Interaction.type,
      value: item.Interaction.value
    }))
)

export const nodes = parseNodes(Goals, Targets);
export const edges = Records
  .filter(record => record.SDGRecords.length>0)
  .flatMap(parseEdges);
